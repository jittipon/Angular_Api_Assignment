<p-toast position="bottom-right"></p-toast>
<h1 class="header">API ASSIGNMENT</h1>

<!-- <div class="add-btn" > 
    <p-button (click)="addBook()">NEW BOOK</p-button>
</div> -->
<div class="add-btn" > 
    <p-button (click)="openNew()">NEW BOOK</p-button>
</div>


<p-table class="table-books" [value]="books">
    <ng-template pTemplate="header">
        <tr>
            <th>id</th>
            <th>name</th>
            <th>detail</th>
            <th>delete</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-book>
        <tr>
            <td>{{book.id}}</td>
            <td>{{book.name}}</td>
            <td>{{book.detail}}</td>
            <td><button (click)="deleteBook(book.id)" pButton pRipple type="button" icon="pi pi-times" class="p-button-rounded p-button-danger"></button></td>
        </tr>
    </ng-template>
</p-table>

<p-dialog [(visible)]="bookDialog" [style]="{width: '450px'}" header="Product Details" [modal]="true" styleClass="p-fluid">
    <ng-template pTemplate="content">
        <div class="p-field">
            <label for="name">Name</label>
            <input type="text" pInputText id="name" [(ngModel)]="book.name" required autofocus />
            <small class="p-invalid" *ngIf="submitted && !book.name">Name is required.</small>
        </div>
        <div class="p-field">
            <label for="description">Description</label>
            <textarea id="description" pInputTextarea [(ngModel)]="book.detail" required rows="3" cols="20"></textarea>
            <small class="p-invalid" *ngIf="submitted && !book.detail">Detail is required.</small>
        </div>
    </ng-template>
    
    <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
        <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="saveBook()"></button>
    </ng-template>
</p-dialog>